# 🔗 Transcribe audio with Deepgram

A Deno Cloud Function for transcribing the audio with [Deepgram](https://deepgram.com/)

_Example input:_

```json
{
   "fileUrl":"https://static.deepgram.com/examples/interview_speech-analytics.wav"
}
```

_Example output:_

```json
{"success":true,"deepgramData":{"channels":[{"alternatives":[{"transcript":"another big problem in the speech analytics space. When customers first bring the software on. Is that they they are blown away by the fact that an engine can monitor hundreds of Kpis. Right? Everything from my new compliance issues to, you know, human human interaction, empathy measurements to upsell aptitude to closing aptitude, They're hundreds literally of Kpis that one to look at. And the speech analytics companies have typically gone to the customer and really bang that trump. We'll get all of these things that we're gonna help you keep an eye on. The reality, however, is that a company even a contact center manager They can't keep track in their brain even if they have a report in front of them. Of that many Kpis. Mh. And frankly, it's overwhelming. So what successful companies do is they bite off no more than they chew at any given time. The reality is is you can only train a call center agent on a maximum of three skills at any given day. Right? And by focusing on focusing on problem areas, for a week for a month depending on how bad things are. And then once you've mastered that skill to take a baseline of of your performance and move on to the next worst skill. Right? Is the way that company succeed using this product?","confidence":0.9926758,"words":[{"word":"another","start":0.33959904,"end":0.839599,"confidence":0.9995117,"punctuated_word":"another"},{"word":"big","start":0.89893866,"end":1.3989387,"confidence":0.99902344,"punctuated_word":"big"},{"word":"problem","start":1.6580424,"end":2.1580424,"confidence":0.99853516,"punctuated_word":"problem"},{"word":"in","start":2.257335,"end":2.4171462,"confidence":0.99902344,"punctuated_word":"in"},{"word":"the","start":2.4171462,"end":2.6568632,"confidence":0.8208008,"punctuated_word":"the"},{"word":"speech","start":2.6568632,"end":3.0963442,"confidence":1,"punctuated_word":"speech"},{"word":"analytics","start":3.0963442,"end":3.4559197,"confidence":0.9296875,"punctuated_word":"analytics"},{"word":"space","start":3.4559197,"end":3.7755425,"confidence":0.99853516,"punctuated_word":"space."},{"word":"when","start":4.614552,"end":4.9341745,"confidence":0.9814453,"punctuated_word":"When"},{"word":"customers","start":4.9341745,"end":5.4341745,"confidence":0.9916992,"punctuated_word":"customers"},{"word":"first","start":5.4535613,"end":5.6932783,"confidence":0.921875,"punctuated_word":"first"},{"word":"bring","start":5.6932783,"end":5.8930426,"confidence":0.97998047,"punctuated_word":"bring"},{"word":"the","start":5.8930426,"end":6.0528536,"confidence":0.9819336,"punctuated_word":"the"},{"word":"software","start":6.0528536,"end":6.5528536,"confidence":0.9951172,"punctuated_word":"software"},{"word":"on","start":6.5722404,"end":6.7720046,"confidence":0.99121094,"punctuated_word":"on."},{"word":"is","start":7.091627,"end":7.331344,"confidence":0.99658203,"punctuated_word":"Is"},{"word":"that","start":7.331344,"end":7.6509666,"confidence":0.99560547,"punctuated_word":"that"},{"word":"they","start":7.6509666,"end":8.150967,"confidence":0.9838867,"punctuated_word":"they"},{"word":"they","start":8.824085,"end":9.302795,"confidence":0.99365234,"punctuated_word":"they"},{"word":"are","start":9.302795,"end":9.802795,"confidence":0.9946289,"punctuated_word":"are"},{"word":"blown","start":10.100645,"end":10.379892,"confidence":0.99902344,"punctuated_word":"blown"},{"word":"away","start":10.379892,"end":10.699032,"confidence":0.92822266,"punctuated_word":"away"},{"word":"by","start":10.699032,"end":10.858602,"confidence":0.99853516,"punctuated_word":"by"},{"word":"the","start":10.858602,"end":11.058064,"confidence":0.99853516,"punctuated_word":"the"},{"word":"fact","start":11.058064,"end":11.297419,"confidence":1,"punctuated_word":"fact"},{"word":"that","start":11.297419,"end":11.456989,"confidence":0.9975586,"punctuated_word":"that"},{"word":"an","start":11.456989,"end":11.776129,"confidence":0.99316406,"punctuated_word":"an"},{"word":"engine","start":11.776129,"end":12.276129,"confidence":0.9970703,"punctuated_word":"engine"},{"word":"can","start":12.494193,"end":12.733548,"confidence":0.9995117,"punctuated_word":"can"},{"word":"monitor","start":12.733548,"end":13.233548,"confidence":0.99853516,"punctuated_word":"monitor"},{"word":"hundreds","start":13.331935,"end":13.831935,"confidence":0.9980469,"punctuated_word":"hundreds"},{"word":"of","start":13.970215,"end":14.129785,"confidence":0.99609375,"punctuated_word":"of"},{"word":"kpis","start":14.20957,"end":14.608494,"confidence":0.99609375,"punctuated_word":"Kpis."},{"word":"right","start":15.446236,"end":15.526021,"confidence":0.99365234,"punctuated_word":"Right?"},{"word":"everything","start":16.26,"end":16.76,"confidence":0.99902344,"punctuated_word":"Everything"},{"word":"from","start":16.9,"end":17.3,"confidence":0.9995117,"punctuated_word":"from"},{"word":"my","start":17.3,"end":17.54,"confidence":0.84521484,"punctuated_word":"my"},{"word":"new","start":17.54,"end":18.04,"confidence":0.6513672,"punctuated_word":"new"},{"word":"compliance","start":18.14,"end":18.5,"confidence":0.9995117,"punctuated_word":"compliance"},{"word":"issues","start":18.5,"end":19,"confidence":0.99365234,"punctuated_word":"issues"},{"word":"to","start":19.22,"end":19.46,"confidence":0.99560547,"punctuated_word":"to,"},{"word":"you","start":19.54,"end":19.619999,"confidence":0.9501953,"punctuated_word":"you"},{"word":"know","start":19.619999,"end":19.7,"confidence":0.98535156,"punctuated_word":"know,"},{"word":"human","start":19.98,"end":20.48,"confidence":0.9892578,"punctuated_word":"human"},{"word":"human","start":20.86,"end":21.36,"confidence":0.9995117,"punctuated_word":"human"},{"word":"interaction","start":21.5,"end":21.86,"confidence":0.99560547,"punctuated_word":"interaction,"},{"word":"empathy","start":22.42,"end":22.74,"confidence":0.99316406,"punctuated_word":"empathy"},{"word":"measurements","start":22.74,"end":23.24,"confidence":0.9741211,"punctuated_word":"measurements"},{"word":"to","start":23.9,"end":24.4,"confidence":0.99658203,"punctuated_word":"to"},{"word":"upsell","start":24.46,"end":24.96,"confidence":0.96777344,"punctuated_word":"upsell"},{"word":"aptitude","start":25.63415,"end":26.13415,"confidence":0.9790039,"punctuated_word":"aptitude"},{"word":"to","start":26.552963,"end":27.032345,"confidence":0.9902344,"punctuated_word":"to"},{"word":"closing","start":27.032345,"end":27.511726,"confidence":0.99365234,"punctuated_word":"closing"},{"word":"aptitude","start":27.511726,"end":28.011726,"confidence":0.95410156,"punctuated_word":"aptitude,"},{"word":"they're","start":29.229511,"end":29.50915,"confidence":0.8588867,"punctuated_word":"They're"},{"word":"hundreds","start":29.50915,"end":29.988531,"confidence":0.8330078,"punctuated_word":"hundreds"},{"word":"literally","start":29.988531,"end":30.388016,"confidence":0.9863281,"punctuated_word":"literally"},{"word":"of","start":30.388016,"end":30.467913,"confidence":0.77441406,"punctuated_word":"of"},{"word":"kpis","start":30.54781,"end":31.027191,"confidence":0.9926758,"punctuated_word":"Kpis"},{"word":"that","start":31.027191,"end":31.147036,"confidence":0.99609375,"punctuated_word":"that"},{"word":"one","start":31.147036,"end":31.346779,"confidence":0.4975586,"punctuated_word":"one"},{"word":"to","start":31.346779,"end":31.506573,"confidence":0.46948242,"punctuated_word":"to"},{"word":"look","start":31.506573,"end":31.666367,"confidence":0.99609375,"punctuated_word":"look"},{"word":"at","start":31.666367,"end":31.786211,"confidence":0.99902344,"punctuated_word":"at."},{"word":"and","start":33.15874,"end":33.31826,"confidence":0.99121094,"punctuated_word":"And"},{"word":"the","start":33.31826,"end":33.55754,"confidence":0.9868164,"punctuated_word":"the"},{"word":"speech","start":33.55754,"end":34.036102,"confidence":1,"punctuated_word":"speech"},{"word":"analytics","start":34.036102,"end":34.434902,"confidence":0.99316406,"punctuated_word":"analytics"},{"word":"companies","start":34.434902,"end":34.934902,"confidence":0.99365234,"punctuated_word":"companies"},{"word":"have","start":35.6313,"end":35.95034,"confidence":0.99560547,"punctuated_word":"have"},{"word":"typically","start":35.95034,"end":36.45034,"confidence":0.9975586,"punctuated_word":"typically"},{"word":"gone","start":36.46878,"end":36.628304,"confidence":0.9970703,"punctuated_word":"gone"},{"word":"to","start":36.628304,"end":36.74794,"confidence":0.99316406,"punctuated_word":"to"},{"word":"the","start":36.74794,"end":36.907463,"confidence":0.9873047,"punctuated_word":"the"},{"word":"customer","start":36.907463,"end":37.38602,"confidence":0.9975586,"punctuated_word":"customer"},{"word":"and","start":37.38602,"end":37.78482,"confidence":0.9165039,"punctuated_word":"and"},{"word":"really","start":37.78482,"end":38.223503,"confidence":0.99609375,"punctuated_word":"really"},{"word":"bang","start":38.223503,"end":38.502663,"confidence":0.8803711,"punctuated_word":"bang"},{"word":"that","start":38.502663,"end":38.781822,"confidence":0.9633789,"punctuated_word":"that"},{"word":"trump","start":38.781822,"end":39.021103,"confidence":0.6171875,"punctuated_word":"trump."},{"word":"we'll","start":39.260384,"end":39.45978,"confidence":0.6879883,"punctuated_word":"We'll"},{"word":"get","start":39.45978,"end":39.73894,"confidence":0.49902344,"punctuated_word":"get"},{"word":"all","start":39.73894,"end":39.97822,"confidence":0.99853516,"punctuated_word":"all"},{"word":"of","start":39.97822,"end":40.17762,"confidence":0.9873047,"punctuated_word":"of"},{"word":"these","start":40.17762,"end":40.456783,"confidence":0.99658203,"punctuated_word":"these"},{"word":"things","start":40.456783,"end":40.77582,"confidence":0.99902344,"punctuated_word":"things"},{"word":"that","start":40.77582,"end":40.895462,"confidence":0.99316406,"punctuated_word":"that"},{"word":"we're","start":40.895462,"end":41.015102,"confidence":0.9550781,"punctuated_word":"we're"},{"w…
```

## 📝 Variables

A single variable: `DEEPGRAM_API_KEY`

## 🚀 Deployment

1. Clone this repository, and enter this function folder:

```
$ git clone https://github.com/open-runtimes/examples.git && cd examples
$ cd deno/deepgram-transcribe-audio
```

2. Enter this function folder and build the code:
```
docker run -e INTERNAL_RUNTIME_ENTRYPOINT=src/mod.ts --rm --interactive --tty --volume $PWD:/usr/code openruntimes/deno:v2-1.24 sh /usr/local/src/build.sh
```
As a result, a `code.tar.gz` file will be generated.

3. Start the Open Runtime:
```
docker run -p 3000:3000 -e INTERNAL_RUNTIME_ENTRYPOINT=src/mod.ts -e INTERNAL_RUNTIME_KEY=secret-key --rm --interactive --tty --volume $PWD/code.tar.gz:/tmp/code.tar.gz:ro openruntimes/deno:v2-1.24 sh /usr/local/src/start.sh
```

Your function is now listening on port `3000`, and you can execute it by sending `POST` request with appropriate authorization headers. To learn more about runtime, you can visit Deno runtime [README](https://github.com/open-runtimes/open-runtimes/tree/main/runtimes/deno-1.24).

## 📝 Notes
 - This function is designed for use with Appwrite Cloud Functions. You can learn more about it in [Appwrite docs](https://appwrite.io/docs/functions).
 - This example is compatible with Deno 1.24. Other versions may work but are not guaranteed to work as they haven't been tested.